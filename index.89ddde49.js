var t={mainSectionEl:document.querySelector(".main"),gameSectionEl:document.querySelector(".section-game"),tilesArry:Array.from(document.querySelectorAll(".tile")),middleTile:document.querySelector(".middle"),yellowMeteor:document.querySelector(".yellow"),innerYellowMeteor:document.querySelector(".yellow-inner"),blueMeteor:document.querySelector(".blue"),meteorsCounter:document.querySelector(".meteors-num"),turnsCounter:document.querySelector(".turn"),popUp:document.querySelector(".pop-up"),restartBtn:document.querySelector(".restart-btn"),copyRight:document.querySelector(".year"),startPlayingBtn:document.querySelector(".play-btn"),topBtn:document.querySelector(".top-btn"),resetBtn:document.querySelector(".reset-btn")};const e=71,o=function(){return Math.trunc(3*Math.random()+3)},n=function(){return(new Date).getFullYear()};let r,l,s,u,i,c=o(),y=1,a=5;const d=function(t,e){l=t.clientX,s=t.clientY,u=parseInt(getComputedStyle(e).top),i=parseInt(getComputedStyle(e).left)},m=function(t,e){let o,n;"touchmove"===t.type&&(o=t.touches[0].clientX-l,n=t.touches[0].clientY-s,e.style.top=u+parseInt(getComputedStyle(e).y)+n+"px",e.style.left=i+parseInt(getComputedStyle(e).x)+o+"px"),"mousemove"===t.type&&(o=t.clientX-l,n=t.clientY-s,e.style.top=u+parseInt(getComputedStyle(e).y)+n+"px",e.style.left=i+parseInt(getComputedStyle(e).x)+o+"px")},p=function(t,e){t.style.pointerEvents="none",e.style.pointerEvents="none",setTimeout((()=>{t.style.top=r.blueMeteor.topPos,t.style.left=r.blueMeteor.leftPos,e.style.top=r.yellowMeteor.topPos,e.style.left=r.yellowMeteor.leftPos,t.style.pointerEvents="auto",e.style.pointerEvents="auto"}),500)},f=function(t,e){let o,n=t.getBoundingClientRect();const r=e.getBoundingClientRect(),l=h(n),s=C(n),u=b(r),i=g(n),c=document.elementsFromPoint(...i).filter((t=>t.classList.contains("tile")));if(0===c.length)return;if(t.classList.contains("blue")){o=l.map((t=>document.elementFromPoint(...t))).filter((t=>t.classList.contains("tile"))).concat(c)}else{o=l.concat(s).concat(u).map((t=>document.elementFromPoint(...t))).filter((t=>null!==t&&t.classList.contains("tile"))).concat(c)}return Array.from(new Set(Array.from(o)))},h=function(t){const[e,o]=[t.left+t.width/2,t.top-1],[n,r]=[t.right-t.width/2,t.bottom],[l,s]=[t.left-1,t.bottom-t.height/2],[u,i]=[t.right,t.bottom-t.height/2];return[[e,o],[n,r],[l,s],[u,i]]},C=function(t){const[o,n]=[t.left+e,t.top+e],[r,l]=[t.right-e,t.top+e],[s,u]=[t.left+e,t.bottom-e],[i,c]=[t.right-e,t.bottom-e];return[[o,n],[r,l],[s,u],[i,c]]},g=function(t){const[e,o]=[t.left+t.width/2,t.top+t.height/2];return[e,o]},b=function(t){const[e,o]=[t.left+t.width/2,t.top-1],[n,r]=[t.right-t.width/2,t.bottom],[l,s]=[t.left-1,t.bottom-t.height/2],[u,i]=[t.right,t.bottom-t.height/2];return[[e,o],[n,r],[l,s],[u,i]]},v=function(){return y++,y>c?(a--,y=1,c=o(),3===a&&(c=1),{meteorsCounter:y,turnsCount:a,meteorsNum:c}):{meteorsCounter:y,turnsCount:a,meteorsNum:c}},E=function(t,e){let o=0;return!!e.classList.contains("destroyed")||(t.forEach((t=>{t.classList.contains("destroyed")&&o++})),o>=4||void 0)},w=function(t){return a=5,c=o(),y=1,t.forEach((t=>{t.classList.contains("destroyed")&&t.classList.remove("destroyed"),t.firstElementChild.textContent=3,t.style.borderColor="rgb(54, 48, 158)",t.classList.contains("middle")&&(t.firstElementChild.textContent=4)})),{turnsCount:a,meteorsNum:c,meteorsCounter:y}},M=function(e,o){e&&e.forEach((e=>{let n=+e.firstElementChild.textContent;e.firstElementChild.textContent=o===t.yellowMeteor?n-3:n-1,2==+e.firstElementChild.textContent&&(e.style.borderColor="#FFD700"),1==+e.firstElementChild.textContent&&(e.style.borderColor="#FF0000"),+e.firstElementChild.textContent<=0&&(e.firstElementChild.textContent="Destroyed",e.classList.add("destroyed"))}))};let S;const x=function(e,o,n){t.turnsCounter.textContent=""+(e<=0?"GAME OVER":`Turns remaining: ${e}`),t.meteorsCounter.textContent=`Meteors count: ${n}/ ${o}`},B=function(e,o,n){S=e,t.meteorsCounter.textContent=`Meteors count: ${n}/ ${S}`,t.turnsCounter.textContent=`Turns remaining: ${o}`};let L;const q=function(e,o,n,r){const l=l=>{if("touchend"===l.type&&l.targetTouches.length>1||"mouseup"===l.type&&0!==l.button)return;if("mouseup"===l.type&&l.preventDefault(),L=!1,l.target!==t.blueMeteor&&l.target!==t.yellowMeteor)return;e(t.blueMeteor,t.yellowMeteor);const s=o(l.target,t.innerYellowMeteor);if(!s)return;M(s,l.target);let u=n();const i=r(t.tilesArry,t.middleTile);if(!u)return;let{meteorsCounter:c,turnsCount:y,meteorsNum:a}=u;t.yellowMeteor.style.display="none",t.blueMeteor.style.display="block",3===y&&(t.yellowMeteor.style.display="flex",t.blueMeteor.style.display="none"),x(y,a,c),function(e,o){e&&(t.popUp.firstChild.textContent="YOU LOST ðŸ˜žðŸ˜”",t.popUp.showModal(),t.restartBtn.style.backgroundColor="rgba(255, 0, 0, 0.8)",t.restartBtn.style.borderColor="rgba(255, 0, 0, 0)"),o<=0&&!e&&(t.popUp.firstChild.textContent="YOU WON ðŸŽ‰ðŸŽ‰",t.restartBtn.style.backgroundColor="#009100",t.restartBtn.style.borderColor="rgba(255, 0, 0, 0)",t.popUp.showModal())}(i,y),2===c&&5===y&&(t.resetBtn.style.visibility="visible",t.resetBtn.style.pointerEvents="all")};["mouseup","touchend"].forEach((t=>{document.addEventListener(t,l)}))};var P,k,D,T;P=n,t.copyRight.textContent=P(),function(t,e){const o={blueMeteor:{topPos:getComputedStyle(t).top,leftPos:getComputedStyle(t).left},yellowMeteor:{topPos:getComputedStyle(e).top,leftPos:getComputedStyle(e).left}};r=o}(t.blueMeteor,t.yellowMeteor),function(t){const e=e=>{"touchmove"===e.type&&e.targetTouches.length>1||"mousedown"===e.type&&0!==e.button||("mousedown"===e.type&&(e.preventDefault(),t(e,e.target)),"touchstart"===e.type&&t(e.touches[0],e.target),L=!0)};["mousedown","touchstart"].forEach((t=>{document.addEventListener(t,e)}))}(d),function(t){const e=e=>{if("touchmove"===e.type&&e.targetTouches.length>1||"mousemove"===e.type&&0!==e.button)return;if("mousemove"===e.type&&e.preventDefault(),!L)return;const o=e.target.closest(".meteor");o&&t(e,o)};["mousemove","touchmove"].forEach((t=>{document.addEventListener(t,e)}))}(m),q(p,f,v,E),B(c,a,y),t.startPlayingBtn.addEventListener("click",(e=>{e.preventDefault(),t.gameSectionEl.scrollIntoView()})),t.topBtn.addEventListener("click",(t=>{t.preventDefault(),window.scrollTo(0,0)})),k=t.gameSectionEl,D=t.topBtn,new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?D.style.display="block":D.style.display="none"}))}),{root:null,threshold:.5}).observe(k),T=w,t.restartBtn.addEventListener("click",(e=>{e.preventDefault(),t.popUp.close();const{turnsCount:o,meteorsNum:n,meteorsCounter:r}=T(t.tilesArry);t.blueMeteor.style.display="block",t.yellowMeteor.style.display="none",t.resetBtn.style.visibility="hidden",t.resetBtn.style.pointerEvents="none",B(n,o,r),x(o,n,r)})),function(e){t.resetBtn.addEventListener("click",(o=>{o.preventDefault();const{turnsCount:n,meteorsNum:r,meteorsCounter:l}=e(t.tilesArry);t.blueMeteor.style.display="block",t.yellowMeteor.style.display="none",t.resetBtn.style.visibility="hidden",t.resetBtn.style.pointerEvents="none",B(r,n,l),x(n,r,l)}))}(w);
//# sourceMappingURL=index.89ddde49.js.map
