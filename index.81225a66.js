function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},l=n.parcelRequirea92c;null==l&&((l=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},n.parcelRequirea92c=l),l.register("27Lyk",(function(t,n){var o,r;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var l={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)l[t[n]]=e[t[n]]},r=function(e){var t=l[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),l("27Lyk").register(JSON.parse('{"eothL":"index.81225a66.js","5gvP2":"start.84b462c6.mp3","jXX44":"win.561dbf0f.mp3","lnKnk":"lose.08a9d0e5.mp3","hu1To":"shake.9d3e358d.mp3","fOBnN":"destroySound.659c323d.mp3","aVhgA":"blue-meteor-nobg.a8e8b44e.png","cuxV2":"yellow-meteor.3ad3aa57.png"}'));var s,i={mainSectionEl:document.querySelector(".main"),gameSectionEl:document.querySelector(".section-game"),heroSectionEl:document.querySelector(".hero-section"),rulesEl:document.querySelector(".rules"),rulesBtn:document.querySelector(".rules-btn"),closeRulesBtn:document.querySelector(".close_rules--btn"),tilesArry:Array.from(document.querySelectorAll(".tile")),turnNumEl:document.querySelector(".turn-num"),meteorsContainerEl:document.querySelector(".meteors-container"),meteorHolderEl:document.querySelector(".meteor-holder"),middleTile:document.querySelector(".middle"),popUp:document.querySelector(".pop-up"),restartBtn:document.querySelector(".restart-btn"),copyRight:document.querySelector(".year"),startPlayingBtn:document.querySelector(".play-btn"),topBtn:document.querySelector(".top-btn"),resetBtn:document.querySelector(".reset-btn")};s=new URL(l("27Lyk").resolve("5gvP2"),import.meta.url).toString();var u;u=new URL(l("27Lyk").resolve("jXX44"),import.meta.url).toString();var c;c=new URL(l("27Lyk").resolve("lnKnk"),import.meta.url).toString();var a;a=new URL(l("27Lyk").resolve("hu1To"),import.meta.url).toString();var d;d=new URL(l("27Lyk").resolve("fOBnN"),import.meta.url).toString();const m=new Audio(t(s)),p=new Audio(t(u)),y=new Audio(t(c)),f=new Audio(t(a)),h=new Audio(t(d)),g=.121,v=function(){return Math.trunc(3*Math.random()+3)},E=function(){return(new Date).getFullYear()};var C;C=new URL(l("27Lyk").resolve("aVhgA"),import.meta.url).toString();var b;b=new URL(l("27Lyk").resolve("cuxV2"),import.meta.url).toString();let w,L,S,x,A,H,B,k=v(),T=5;const R=function(e,t){if(L=e.clientX,S=e.clientY,t.classList.contains("yellow")){if(void 0!==H&&void 0!==B)return;H=parseInt(getComputedStyle(t).top),B=parseInt(getComputedStyle(t).left)}void 0!==x&&void 0!==A||(x=parseInt(getComputedStyle(t).top),A=parseInt(getComputedStyle(t).left))},q=function(e,t){let n,o;if("touchmove"===e.type&&(n=e.touches[0].clientX-L,o=e.touches[0].clientY-S),"mousemove"===e.type&&(n=e.clientX-L,o=e.clientY-S),t.classList.contains("yellow"))return t.style.top=H+parseInt(getComputedStyle(t).y)+o+"px",void(t.style.left=B+parseInt(getComputedStyle(t).x)+n+"px");t.style.top=x+parseInt(getComputedStyle(t).y)+o+"px",t.style.left=A+parseInt(getComputedStyle(t).x)+n+"px"},_=function(e){e.style.pointerEvents="none",setTimeout((()=>{e.style.top=x+"px",e.style.left=A+"px",e.classList.contains("yellow")&&(e.style.top=H+"px",e.style.left=B+"px"),e.style.pointerEvents="all"}),500)},U=function(e,t){let n,o=e.getBoundingClientRect();const r=t.getBoundingClientRect(),l=O(o),s=M(o),i=P(r),u=F(o),c=document.elementsFromPoint(...u).filter((e=>e.classList.contains("tile")));if(0===c.length)return;if(e.classList.contains("blue")){n=l.map((e=>document.elementFromPoint(...e))).filter((e=>e.classList.contains("tile"))).concat(c)}else{n=l.concat(s).concat(i).map((e=>document.elementFromPoint(...e))).filter((e=>null!==e&&e.classList.contains("tile"))).concat(c)}return Array.from(new Set(Array.from(n)))},O=function(e){const[t,n]=[e.left+e.width/2,e.top-1],[o,r]=[e.right-e.width/2,e.bottom],[l,s]=[e.left-1,e.bottom-e.height/2],[i,u]=[e.right,e.bottom-e.height/2];return[[t,n],[o,r],[l,s],[i,u]]},M=function(e){const[t,n]=[e.left+e.width*g,e.top+e.width*g],[o,r]=[e.right-e.width*g,e.top+e.width*g],[l,s]=[e.left+e.width*g,e.bottom-e.width*g],[i,u]=[e.right-e.width*g,e.bottom-e.width*g];return[[t,n],[o,r],[l,s],[i,u]]},F=function(e){const[t,n]=[e.left+e.width/2,e.top+e.height/2];return[t,n]},P=function(e){const[t,n]=[e.left+e.width/2,e.top-1],[o,r]=[e.right-e.width/2,e.bottom],[l,s]=[e.left-1,e.bottom-e.height/2],[i,u]=[e.right,e.bottom-e.height/2];return[[t,n],[o,r],[l,s],[i,u]]},D=function(e){let n="",o=`<div class="meteor blue">\n  <img src="${t(C)}" alt="blue meteor image" />\n</div>\n`;for(let t=0;t<e;t++)n+=o;return n};w=D(k);const N=function(e){return e.querySelectorAll(".meteor").length?{turnsCount:T}:(T--,3===T?{turnsCount:T,meteorsHTML:`<div class="meteor yellow">\n      <img class= "yellow-inner" src="${t(b)}" alt="yellow meteor image" />\n    </div>`}:(k=v(),w=D(k),{turnsCount:T,meteorsHTML:w}))},I=function(e,t){let n=0;return!!t.classList.contains("destroyed")||(e.forEach((e=>{e.classList.contains("destroyed")&&n++})),n>=4||void 0)},j=function(e){return T=5,k=v(),w=D(k),e.forEach((e=>{e.classList.contains("destroyed")&&e.classList.remove("destroyed"),e.firstElementChild.textContent=3,e.style.borderColor="rgb(54, 48, 158)",e.classList.contains("middle")&&(e.firstElementChild.textContent=4)})),{turnsCount:T,meteorsHTML:w}},Y=function(e,t){e&&e.forEach((e=>{let n=+e.firstElementChild.textContent;e.classList.add("shake"),setTimeout((()=>{e.classList.remove("shake")}),800),t.classList.contains("yellow")?e.firstElementChild.textContent=n-3:e.firstElementChild.textContent=n-1,2==+e.firstElementChild.textContent&&(e.style.borderColor="rgb(255,215,0)",f.play()),1==+e.firstElementChild.textContent&&(e.style.borderColor="rgb(255,0,0)",f.play()),+e.firstElementChild.textContent<=0&&(e.classList.add("destroyed"),h.play(),h.loop=!1)}))},X=function(e,t){i.turnNumEl.textContent=t?"GAME OVER":`Turn: ${e}`},V=function(e){i.meteorsContainerEl.insertAdjacentHTML("afterbegin",e),i.meteorHolderEl.insertAdjacentElement("afterbegin",i.meteorsContainerEl.firstChild),i.meteorHolderEl.firstChild.classList.add("move")};let W;const $=function(e,t,n,o){const r=r=>{let l;if("touchend"===r.type&&r.targetTouches.length>1||"mouseup"===r.type&&0!==r.button)return;"mouseup"===r.type&&r.preventDefault(),W=!1;const s=r.target.closest(".move");if(!s)return;const u=t(s,r.target.firstElementChild);if(!u)return void e(s);i.startPlayingBtn.textContent="CONTINUE",i.resetBtn.style.visibility="visible",i.resetBtn.style.pointerEvents="all",Y(u,s),s.remove(),i.meteorsContainerEl.querySelectorAll(".meteor").length&&(i.meteorHolderEl.insertAdjacentElement("afterbegin",i.meteorHolderEl.previousElementSibling),i.meteorHolderEl.firstChild.classList.add("move"));let c=n(i.meteorsContainerEl);const a=o(i.tilesArry,i.middleTile);if(a||0===c.turnsCount)return d=a,m=c.turnsCount,l=d?(i.popUp.firstChild.textContent="YOU LOST ðŸ˜žðŸ˜”",i.restartBtn.style.backgroundColor="rgba(255, 0, 0, 0.8)",i.restartBtn.style.borderColor="rgba(255, 0, 0, 0)",i.popUp.showModal(),y.play(),!0):m<=0&&!d?(i.popUp.firstChild.textContent="YOU WON ðŸŽ‰ðŸŽ‰",i.restartBtn.style.backgroundColor="rgba(0, 145, 0, 0.8)",i.restartBtn.style.borderColor="rgba(255, 0, 0, 0)",i.popUp.showModal(),p.play(),!0):void 0,void X(c.turnsCount,l);var d,m;c.meteorsHTML&&(V(c.meteorsHTML),X(c.turnsCount,l))};["mouseup","touchend"].forEach((e=>{document.addEventListener(e,r)}))};var K,G,J,z;K=E,i.copyRight.textContent=K(),V(w),function(e){const t=t=>{if("touchdown"===t.type&&t.targetTouches.length>1||"mousedown"===t.type&&0!==t.button)return;const n=t.target.closest(".move");n&&("mousedown"===t.type&&(t.preventDefault(),e(t,n)),"touchstart"===t.type&&e(t.touches[0],n),W=!0)};["mousedown","touchstart"].forEach((e=>{document.addEventListener(e,t)}))}(R),function(e){const t=t=>{if("touchmove"===t.type&&t.targetTouches.length>1||"mousemove"===t.type&&0!==t.button)return;if("mousemove"===t.type&&t.preventDefault(),!W)return;const n=t.target.closest(".move");n&&e(t,n)};["mousemove","touchmove"].forEach((e=>{document.addEventListener(e,t)}))}(q),$(_,U,N,I),X(T),i.startPlayingBtn.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo(0,document.body.scrollHeight),m.play()})),i.rulesBtn.addEventListener("click",(e=>{e.preventDefault(),i.rulesEl.showModal()})),i.closeRulesBtn.addEventListener("click",(e=>{e.preventDefault(),i.rulesEl.close()})),i.topBtn.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo(0,0),m.pause()})),G=i.heroSectionEl,J=i.topBtn,new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?J.style.display="none":J.style.display="block"}))}),{root:null,threshold:.3}).observe(G),function(e){const t=t=>{if("keydown"===t.type&&"Escape"!==t.key||"click"===t.type&&0!==t.button)return;t.preventDefault(),i.resetBtn.style.visibility="hidden",i.resetBtn.style.pointerEvents="none",i.popUp.close();const{turnsCount:n,meteorsHTML:o}=e(i.tilesArry);i.meteorsContainerEl.querySelectorAll(".meteor").forEach((e=>{e.remove()})),X(n),V(o),m.play(),i.startPlayingBtn.textContent="PLAY NOW"};i.restartBtn.addEventListener("click",t),i.popUp.addEventListener("keydown",t)}(j),z=j,i.resetBtn.addEventListener("click",(e=>{e.preventDefault(),i.resetBtn.style.visibility="hidden",i.resetBtn.style.pointerEvents="none";const{turnsCount:t,meteorsHTML:n}=z(i.tilesArry);i.meteorsContainerEl.querySelectorAll(".meteor").forEach((e=>{e.remove()})),m.play(),i.startPlayingBtn.textContent="PLAY NOW",X(t),V(n)}));
//# sourceMappingURL=index.81225a66.js.map
